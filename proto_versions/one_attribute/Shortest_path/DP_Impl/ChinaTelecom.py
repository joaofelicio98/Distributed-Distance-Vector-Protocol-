from p4utils.mininetlib.network_API import NetworkAPI

net = NetworkAPI()

net.setLogLevel("info")
net.setCompiler(p4rt=True)
net.disableArpTables()

net.execScript("python controller.py s1 &", reboot=True)
net.addP4RuntimeSwitch("s1")
net.addHost("h1")
net.execScript("python controller.py s2 &", reboot=True)
net.addP4RuntimeSwitch("s2")
net.addHost("h2")
net.execScript("python controller.py s3 &", reboot=True)
net.addP4RuntimeSwitch("s3")
net.addHost("h3")
net.execScript("python controller.py s4 &", reboot=True)
net.addP4RuntimeSwitch("s4")
net.addHost("h4")
net.execScript("python controller.py s5 &", reboot=True)
net.addP4RuntimeSwitch("s5")
net.addHost("h5")
net.execScript("python controller.py s6 &", reboot=True)
net.addP4RuntimeSwitch("s6")
net.addHost("h6")
net.execScript("python controller.py s7 &", reboot=True)
net.addP4RuntimeSwitch("s7")
net.addHost("h7")
net.execScript("python controller.py s8 &", reboot=True)
net.addP4RuntimeSwitch("s8")
net.addHost("h8")
net.execScript("python controller.py s9 &", reboot=True)
net.addP4RuntimeSwitch("s9")
net.addHost("h9")
net.execScript("python controller.py s10 &", reboot=True)
net.addP4RuntimeSwitch("s10")
net.addHost("h10")
net.execScript("python controller.py s11 &", reboot=True)
net.addP4RuntimeSwitch("s11")
net.addHost("h11")
net.execScript("python controller.py s12 &", reboot=True)
net.addP4RuntimeSwitch("s12")
net.addHost("h12")
net.execScript("python controller.py s13 &", reboot=True)
net.addP4RuntimeSwitch("s13")
net.addHost("h13")
net.execScript("python controller.py s14 &", reboot=True)
net.addP4RuntimeSwitch("s14")
net.addHost("h14")
net.execScript("python controller.py s15 &", reboot=True)
net.addP4RuntimeSwitch("s15")
net.addHost("h15")
net.execScript("python controller.py s16 &", reboot=True)
net.addP4RuntimeSwitch("s16")
net.addHost("h16")
net.execScript("python controller.py s17 &", reboot=True)
net.addP4RuntimeSwitch("s17")
net.addHost("h17")
net.execScript("python controller.py s18 &", reboot=True)
net.addP4RuntimeSwitch("s18")
net.addHost("h18")
net.execScript("python controller.py s19 &", reboot=True)
net.addP4RuntimeSwitch("s19")
net.addHost("h19")
net.execScript("python controller.py s20 &", reboot=True)
net.addP4RuntimeSwitch("s20")
net.addHost("h20")
net.execScript("python controller.py s21 &", reboot=True)
net.addP4RuntimeSwitch("s21")
net.addHost("h21")
net.execScript("python controller.py s22 &", reboot=True)
net.addP4RuntimeSwitch("s22")
net.addHost("h22")
net.execScript("python controller.py s23 &", reboot=True)
net.addP4RuntimeSwitch("s23")
net.addHost("h23")
net.execScript("python controller.py s24 &", reboot=True)
net.addP4RuntimeSwitch("s24")
net.addHost("h24")
net.execScript("python controller.py s25 &", reboot=True)
net.addP4RuntimeSwitch("s25")
net.addHost("h25")
net.execScript("python controller.py s26 &", reboot=True)
net.addP4RuntimeSwitch("s26")
net.addHost("h26")
net.execScript("python controller.py s27 &", reboot=True)
net.addP4RuntimeSwitch("s27")
net.addHost("h27")
net.execScript("python controller.py s28 &", reboot=True)
net.addP4RuntimeSwitch("s28")
net.addHost("h28")
net.execScript("python controller.py s29 &", reboot=True)
net.addP4RuntimeSwitch("s29")
net.addHost("h29")
net.execScript("python controller.py s30 &", reboot=True)
net.addP4RuntimeSwitch("s30")
net.addHost("h30")
net.execScript("python controller.py s31 &", reboot=True)
net.addP4RuntimeSwitch("s31")
net.addHost("h31")
net.execScript("python controller.py s32 &", reboot=True)
net.addP4RuntimeSwitch("s32")
net.addHost("h32")
net.execScript("python controller.py s33 &", reboot=True)
net.addP4RuntimeSwitch("s33")
net.addHost("h33")
net.execScript("python controller.py s34 &", reboot=True)
net.addP4RuntimeSwitch("s34")
net.addHost("h34")
net.execScript("python controller.py s35 &", reboot=True)
net.addP4RuntimeSwitch("s35")
net.addHost("h35")
net.execScript("python controller.py s36 &", reboot=True)
net.addP4RuntimeSwitch("s36")
net.addHost("h36")
net.execScript("python controller.py s37 &", reboot=True)
net.addP4RuntimeSwitch("s37")
net.addHost("h37")
net.execScript("python controller.py s38 &", reboot=True)
net.addP4RuntimeSwitch("s38")
net.addHost("h38")
net.execScript("python controller.py s39 &", reboot=True)
net.addP4RuntimeSwitch("s39")
net.addHost("h39")
net.execScript("python controller.py s40 &", reboot=True)
net.addP4RuntimeSwitch("s40")
net.addHost("h40")
net.execScript("python controller.py s41 &", reboot=True)
net.addP4RuntimeSwitch("s41")
net.addHost("h41")
net.execScript("python controller.py s42 &", reboot=True)
net.addP4RuntimeSwitch("s42")
net.addHost("h42")
net.setP4SourceAll("./p4src/main.p4")

net.addLink("s1", "h1")
net.addLink("s2", "h2")
net.addLink("s3", "h3")
net.addLink("s4", "h4")
net.addLink("s5", "h5")
net.addLink("s6", "h6")
net.addLink("s7", "h7")
net.addLink("s8", "h8")
net.addLink("s9", "h9")
net.addLink("s10", "h10")
net.addLink("s11", "h11")
net.addLink("s12", "h12")
net.addLink("s13", "h13")
net.addLink("s14", "h14")
net.addLink("s15", "h15")
net.addLink("s16", "h16")
net.addLink("s17", "h17")
net.addLink("s18", "h18")
net.addLink("s19", "h19")
net.addLink("s20", "h20")
net.addLink("s21", "h21")
net.addLink("s22", "h22")
net.addLink("s23", "h23")
net.addLink("s24", "h24")
net.addLink("s25", "h25")
net.addLink("s26", "h26")
net.addLink("s27", "h27")
net.addLink("s28", "h28")
net.addLink("s29", "h29")
net.addLink("s30", "h30")
net.addLink("s31", "h31")
net.addLink("s32", "h32")
net.addLink("s33", "h33")
net.addLink("s34", "h34")
net.addLink("s35", "h35")
net.addLink("s36", "h36")
net.addLink("s37", "h37")
net.addLink("s38", "h38")
net.addLink("s39", "h39")
net.addLink("s40", "h40")
net.addLink("s41", "h41")
net.addLink("s42", "h42")

net.addLink("s1", "s17")
net.setDelay("s1", "s17", 108)
net.setBw("s1", "s17", 1)
net.addLink("s1", "s4")
net.setDelay("s1", "s4", 131)
net.setBw("s1", "s4", 1)
net.addLink("s1", "s40")
net.setDelay("s1", "s40", 125)
net.setBw("s1", "s40", 1)
net.addLink("s2", "s19")
net.setDelay("s2", "s19", 115)
net.setBw("s2", "s19", 1)
net.addLink("s2", "s40")
net.setDelay("s2", "s40", 123)
net.setBw("s2", "s40", 1)
net.addLink("s3", "s34")
net.setDelay("s3", "s34", 118)
net.setBw("s3", "s34", 1)
net.addLink("s5", "s9")
net.setDelay("s5", "s9", 129)
net.setBw("s5", "s9", 1)
net.addLink("s6", "s39")
net.setDelay("s6", "s39", 108)
net.setBw("s6", "s39", 1)
net.addLink("s7", "s19")
net.setDelay("s7", "s19", 130)
net.setBw("s7", "s19", 1)
net.addLink("s7", "s40")
net.setDelay("s7", "s40", 117)
net.setBw("s7", "s40", 1)
net.addLink("s8", "s40")
net.setDelay("s8", "s40", 116)
net.setBw("s8", "s40", 1)
net.addLink("s9", "s39")
net.setDelay("s9", "s39", 131)
net.setBw("s9", "s39", 1)
net.addLink("s9", "s40")
net.setDelay("s9", "s40", 113)
net.setBw("s9", "s40", 1)
net.addLink("s9", "s10")
net.setDelay("s9", "s10", 124)
net.setBw("s9", "s10", 1)
net.addLink("s9", "s12")
net.setDelay("s9", "s12", 123)
net.setBw("s9", "s12", 1)
net.addLink("s9", "s17")
net.setDelay("s9", "s17", 118)
net.setBw("s9", "s17", 1)
net.addLink("s9", "s19")
net.setDelay("s9", "s19", 113)
net.setBw("s9", "s19", 1)
net.addLink("s9", "s24")
net.setDelay("s9", "s24", 118)
net.setBw("s9", "s24", 1)
net.addLink("s9", "s25")
net.setDelay("s9", "s25", 120)
net.setBw("s9", "s25", 1)
net.addLink("s9", "s26")
net.setDelay("s9", "s26", 118)
net.setBw("s9", "s26", 1)
net.addLink("s9", "s27")
net.setDelay("s9", "s27", 127)
net.setBw("s9", "s27", 1)
net.addLink("s9", "s28")
net.setDelay("s9", "s28", 119)
net.setBw("s9", "s28", 1)
net.addLink("s9", "s29")
net.setDelay("s9", "s29", 112)
net.setBw("s9", "s29", 1)
net.addLink("s9", "s32")
net.setDelay("s9", "s32", 121)
net.setBw("s9", "s32", 1)
net.addLink("s10", "s28")
net.setDelay("s10", "s28", 108)
net.setBw("s10", "s28", 1)
net.addLink("s11", "s40")
net.setDelay("s11", "s40", 118)
net.setBw("s11", "s40", 1)
net.addLink("s13", "s29")
net.setDelay("s13", "s29", 124)
net.setBw("s13", "s29", 1)
net.addLink("s14", "s26")
net.setDelay("s14", "s26", 129)
net.setBw("s14", "s26", 1)
net.addLink("s15", "s17")
net.setDelay("s15", "s17", 130)
net.setBw("s15", "s17", 1)
net.addLink("s15", "s29")
net.setDelay("s15", "s29", 111)
net.setBw("s15", "s29", 1)
net.addLink("s16", "s17")
net.setDelay("s16", "s17", 130)
net.setBw("s16", "s17", 1)
net.addLink("s16", "s29")
net.setDelay("s16", "s29", 132)
net.setBw("s16", "s29", 1)
net.addLink("s17", "s28")
net.setDelay("s17", "s28", 112)
net.setBw("s17", "s28", 1)
net.addLink("s17", "s29")
net.setDelay("s17", "s29", 111)
net.setBw("s17", "s29", 1)
net.addLink("s18", "s29")
net.setDelay("s18", "s29", 124)
net.setBw("s18", "s29", 1)
net.addLink("s19", "s33")
net.setDelay("s19", "s33", 117)
net.setBw("s19", "s33", 1)
net.addLink("s19", "s34")
net.setDelay("s19", "s34", 120)
net.setBw("s19", "s34", 1)
net.addLink("s19", "s42")
net.setDelay("s19", "s42", 109)
net.setBw("s19", "s42", 1)
net.addLink("s19", "s40")
net.setDelay("s19", "s40", 112)
net.setBw("s19", "s40", 1)
net.addLink("s19", "s41")
net.setDelay("s19", "s41", 108)
net.setBw("s19", "s41", 1)
net.addLink("s19", "s26")
net.setDelay("s19", "s26", 128)
net.setBw("s19", "s26", 1)
net.addLink("s19", "s28")
net.setDelay("s19", "s28", 132)
net.setBw("s19", "s28", 1)
net.addLink("s19", "s29")
net.setDelay("s19", "s29", 124)
net.setBw("s19", "s29", 1)
net.addLink("s20", "s40")
net.setDelay("s20", "s40", 109)
net.setBw("s20", "s40", 1)
net.addLink("s21", "s24")
net.setDelay("s21", "s24", 118)
net.setBw("s21", "s24", 1)
net.addLink("s22", "s29")
net.setDelay("s22", "s29", 123)
net.setBw("s22", "s29", 1)
net.addLink("s23", "s26")
net.setDelay("s23", "s26", 118)
net.setBw("s23", "s26", 1)
net.addLink("s23", "s29")
net.setDelay("s23", "s29", 129)
net.setBw("s23", "s29", 1)
net.addLink("s24", "s29")
net.setDelay("s24", "s29", 122)
net.setBw("s24", "s29", 1)
net.addLink("s24", "s40")
net.setDelay("s24", "s40", 116)
net.setBw("s24", "s40", 1)
net.addLink("s26", "s40")
net.setDelay("s26", "s40", 110)
net.setBw("s26", "s40", 1)
net.addLink("s26", "s28")
net.setDelay("s26", "s28", 122)
net.setBw("s26", "s28", 1)
net.addLink("s28", "s40")
net.setDelay("s28", "s40", 126)
net.setBw("s28", "s40", 1)
net.addLink("s28", "s31")
net.setDelay("s28", "s31", 131)
net.setBw("s28", "s31", 1)
net.addLink("s29", "s39")
net.setDelay("s29", "s39", 122)
net.setBw("s29", "s39", 1)
net.addLink("s29", "s40")
net.setDelay("s29", "s40", 120)
net.setBw("s29", "s40", 1)
net.addLink("s29", "s30")
net.setDelay("s29", "s30", 132)
net.setBw("s29", "s30", 1)
net.addLink("s33", "s40")
net.setDelay("s33", "s40", 118)
net.setBw("s33", "s40", 1)
net.addLink("s34", "s40")
net.setDelay("s34", "s40", 126)
net.setBw("s34", "s40", 1)
net.addLink("s35", "s40")
net.setDelay("s35", "s40", 126)
net.setBw("s35", "s40", 1)
net.addLink("s36", "s40")
net.setDelay("s36", "s40", 129)
net.setBw("s36", "s40", 1)
net.addLink("s37", "s40")
net.setDelay("s37", "s40", 124)
net.setBw("s37", "s40", 1)
net.addLink("s38", "s39")
net.setDelay("s38", "s39", 122)
net.setBw("s38", "s39", 1)
net.addLink("s39", "s40")
net.setDelay("s39", "s40", 114)
net.setBw("s39", "s40", 1)
net.addLink("s40", "s42")
net.setDelay("s40", "s42", 125)
net.setBw("s40", "s42", 1)
net.addLink("s40", "s41")
net.setDelay("s40", "s41", 119)
net.setBw("s40", "s41", 1)
# Assignment strategy
net.mixed()
# Nodes general options
net.enableCpuPortAll()
#net.enablePcapDumpAll()
#net.enableLogAll()
net.enableCli()
net.startNetwork()
